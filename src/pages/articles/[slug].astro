---
import Layout from '../../layouts/Layout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);

const formattedDate = article.data.date.toLocaleDateString('en-US', {
  month: 'long',
  day: 'numeric',
  year: 'numeric',
});
---

<Layout title={`${article.data.title} | Nate Kadlac`} description={article.data.description || `${article.data.title} - an article by Nate Kadlac on design, creativity, and building your business.`} ogImage={article.data.image}>
  <article class="max-w-[900px] mx-auto px-6 py-16 md:py-24">
    <!-- Article Header -->
    <header class="mb-12">
      <time class="text-sm text-brand-brown/60 font-medium uppercase tracking-wider">
        {formattedDate}
      </time>
      <h1 class="font-heading text-4xl md:text-5xl lg:text-6xl font-bold mt-4 leading-tight tracking-tight">
        {article.data.title}
      </h1>
      {article.data.description && (
        <p class="text-xl text-brand-brown/70 mt-6">
          {article.data.description}
        </p>
      )}
    </header>

    <!-- Hero Image -->
    {article.data.image && (
      <img
        src={article.data.image}
        alt={article.data.title}
        class="w-full rounded-2xl mb-12"
      />
    )}

    <!-- Article Content -->
    <div class="prose">
      <Content />
    </div>

    <!-- Back Link -->
    <div class="mt-16 pt-8 border-t border-brand-brown/10">
      <a href="/articles" class="font-heading font-medium hover:opacity-70 transition-opacity">
        ‚Üê Back to all articles
      </a>
    </div>
  </article>
</Layout>
